---
title: 配置
layout: /src/layouts/autonum.astro
lastUpdated: 2025-04-03
---

# 配置 Hyprland
以下以及其他许多东西都由 Hyprland 提供支持。
- 全局快捷键
- 环境变量
- 显示器/屏幕/工作区
- 窗口动画/装饰
- ...

参考：[Hyprland Wiki](https://wiki.hyprland.org/)

要配置 Hyprland，请编辑 `~/.config/hypr/custom/` 下的文件，这些文件由 `~/.config/hypr/hyprland.conf` 源文件。

Hyprland 读取 `hyprland.conf`。当它看到 `source` 关键字时，会读取源文件，然后继续。

`install.sh` 脚本不会覆盖 `~/.config/hypr/custom/`。

另外，对于 `~/.config/hypr/hyprland.conf`，如果它存在则不会被覆盖，但会生成一个 `~/.config/hypr/hyprland.conf.new`。`*.new` 文件仅用于格式参考，没有任何实际效果。

:::caution
要覆盖默认配置，你可能需要使用一些技术，例如 `unbind` 用于快捷键。

如果你无法覆盖某些内容，可以将默认配置文件从 `~/.config/hypr/hyprland/` 复制到 `~/.config/hypr/custom/`，并编辑 `~/.config/hypr/hyprland.conf` 以注释掉源默认配置文件的行。

但如果你在使用 `install.sh` 更新后发现 Hyprland 有问题，你需要重新检查 `~/.config/hypr/hyprland.conf` 以查看被注释掉的默认配置文件是否包含一些必要的更改。
:::

## 为应用程序启用模糊效果
在 `~/.config/hypr/hyprland/rules.conf` 中，注释掉（用 `#`）或删除以下行
```ini
windowrule = noblur,.*  # 禁用窗口的模糊效果。显著提高性能。
```

# 配置 AGS
以下以及其他一些东西由 AGS 提供支持。
- 顶部栏
- 侧边栏
- 快捷键速查表
- 通知
- 概览小部件

## 对最终用户
编辑 `~/.config/ags/user_options.jsonc`，在你更新时不会被 `install.sh` 覆盖
你可以配置如下内容
- 默认的 ChatGPT 类似助手提供商
- 动画速度
- 时间格式
- ...

:::note
对于不限于 AGS 的配置，请参见"杂项"部分。
:::
### 设置日期和时间格式

在 `~/.config/ags/user_options.jsonc` 中，根据[此格式](https://docs.gtk.org/glib/method.DateTime.format.html)编辑 "time" 部分。
你也可以运行 `man date` 查看时间格式。

### 设置天气小部件的城市
当未检测到电池时（通常是台式机），电池小部件和工具小部件将不会显示。
相反，天气小部件将出现在此位置。

天气的城市默认通过 `curl ipinfo.io` 检测，或在 `~/.config/ags/user_options.jsonc` 中显式设置。

:::note
如果你不确定城市名称，
由于我们使用 [wttr.in](https://github.com/chubin/wttr.in) 提供天气信息，你可以在那里找到答案。
:::

### 设置快捷键
要配置的快捷键有限，你需要参考 gdk 文档以了解键，但它是有效的。

参见 [#5](https://github.com/end-4/dots-hyprland-wiki/issues/5) 了解更多。

### 自定义小部件
你可以使用 bash 脚本的输出作为小部件。如果 `~/.cache/ags/user/scripts/custom-module-poll.sh` 存在，AGS 将默认每 5000 毫秒显示其输出，以替代系统资源指示器

例如，显示路径 `/` 的可用存储空间：
```bash title="~/.cache/ags/user/scripts/custom-module-poll.sh"
#!/bin/bash
export LANG=C
disk_info=$(df -h /)
available=$(echo "$disk_info" | awk 'NR==2 {print $4}')
total=$(echo "$disk_info" | awk 'NR==2 {print $2}')
echo "$available/$total"
```
以及一个更不灵活的 2 行版本，如果你更喜欢：
```bash title="~/.cache/ags/user/scripts/custom-module-poll.sh"
#!/bin/bash
LANG=C df -h / | awk 'NR==2 {printf "%s/%s\n", $4, $2}'
```

:::note
记得使你的脚本可执行！
```bash
chmod +x ~/.cache/ags/user/scripts/*.sh
```
:::

进一步自定义：
- 轮询间隔，以毫秒为单位：`~/.cache/ags/user/scripts/custom-module-interval.txt`（默认 = 5000）
- 左键单击操作脚本：`~/.cache/ags/user/scripts/custom-module-leftclick.sh`
- 右键单击操作脚本：`~/.cache/ags/user/scripts/custom-module-rightclick.sh`

## 对极客（你可能不是）
- 参见 [AGS 文档](https://aylur.github.io/ags-docs)
- 还有开发笔记（参见侧边栏）

# 杂项
## 调整 UI / 更改字体大小
更改字体大小也会更改 AGS 的 UI 缩放。
- 使用 `gsettings`：
```bash
# 语法
gsettings set org.gnome.desktop.interface font-name 'FONT_NAME FONT_SIZE'
# 这些 dotfiles 的默认值
gsettings set org.gnome.desktop.interface font-name 'Rubik 11'
```

## 配置屏幕锁定
### 自动屏幕锁定
参考：[Hyprland Wiki](https://wiki.hyprland.org/Hypr-Ecosystem/hypridle/)

编辑 `~/.config/hypr/hypridle.conf` 以满足你的需求。
### 自定义 Hyprlock
参考：[Hyprland Wiki](https://wiki.hyprland.org/Hypr-Ecosystem/hyprlock/)

Hyprlock 是默认的屏幕锁定提供程序。

编辑 `~/.config/hypr/hyprlock.conf` 以满足你的需求。

例如，要设置日期和时间格式，更改与锁定对应的 `text` 值。
### 使用其他屏幕锁定提供程序
参考：[Arch Wiki](https://wiki.archlinux.org/title/Session_lock)

以 `swaylock` 为例。

编辑 `~/.config/hypr/hypridle.conf` 并修改 `$lock_cmd` 的值如下：
```conf
$lock_cmd = swaylock
```
并确保 hypridle 正在运行（通常如果你在 Hyprland 配置中添加了 `exec-once = hypridle`，它应该会自动启动）。

结果是，`loginctl lock-session` 将调用 `swaylock` 来锁定屏幕。

:::note[如何]
命令 `loginctl lock-session` 将向正在运行的 `hypridle` 进程发送信号，然后 `hypridle` 将触发 `$lock_cmd` 值中的命令。
:::

## Cloudflare WARP
- 这可能帮助你绕过 ISP 的限制并提供更快的互联网
- 如果安装了，右侧边栏将有一个按钮来切换 WARP
- 要安装 Cloudflare WARP，运行 `yay -S cloudflare-warp-bin && sudo systemctl enable warp-svc --now`